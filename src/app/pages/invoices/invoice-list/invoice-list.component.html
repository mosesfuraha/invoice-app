<div
  class="flex flex-col p-11 space-y-8"
  [ngClass]="{ dark: isDarkMode$ | async }"
>
  <div class="flex justify-between items-center">
    <div>
      <h1
        class="text-2xl font-bold"
        [ngClass]="{
          'text-lightText': !(isDarkMode$ | async),
          'text-darkSecondary': isDarkMode$ | async
        }"
      >
        Invoices
      </h1>
      <p
        class="text-sm"
        [ngClass]="{
          'text-lightSecondary': !(isDarkMode$ | async),
          'text-darkSecondary': isDarkMode$ | async
        }"
      >
        There are 7 total invoices
      </p>
    </div>

    <div class="flex items-center space-x-3">
      <div class="flex items-center space-x-3 relative">
        <span
          class="text-sm cursor-pointer"
          [ngClass]="{
            'text-lightText': !(isDarkMode$ | async),
            'text-darkSecondary': isDarkMode$ | async
          }"
          (mouseenter)="showDropdown()"
          (mouseleave)="hideDropdownWithDelay()"
        >
          Filter by status
        </span>
        <img
          [src]="
            dropdownVisible
              ? 'assets/icon.arrow.up.svg'
              : 'assets/icon-arrow-down.svg'
          "
          alt="Arrow Down Icon"
          class="w-3 h-2 cursor-pointer"
          (mouseenter)="showDropdown()"
          (mouseleave)="hideDropdownWithDelay()"
        />

        <div
          class="absolute top-8 right-0 bg-white dark:bg-darkPrimary shadow-lg rounded-md p-4 w-48 cursor-pointer"
          [ngClass]="{ hidden: !dropdownVisible }"
          (mouseenter)="showDropdown()"
          (mouseleave)="hideDropdownWithDelay()"
        >
          <div class="flex items-center space-x-2">
            <input
              type="checkbox"
              id="pending"
              [checked]="selectedStatuses['pending']"
              (change)="toggleStatus('pending')"
            />
            <label
              for="pending"
              class="text-sm text-lightText font-bold dark:text-white"
              >Pending</label
            >
          </div>
          <div class="flex items-center space-x-2 mt-2">
            <input
              type="checkbox"
              id="paid"
              [checked]="selectedStatuses['paid']"
              (change)="toggleStatus('paid')"
            />
            <label
              for="paid"
              class="text-sm text-lightText font-bold dark:text-white"
              >Paid</label
            >
          </div>
          <div class="flex items-center space-x-2 mt-2">
            <input
              type="checkbox"
              id="draft"
              [checked]="selectedStatuses['draft']"
              (change)="toggleStatus('draft')"
            />
            <label
              for="draft"
              class="text-sm text-lightText font-bold dark:text-white"
              >Draft</label
            >
          </div>
        </div>
      </div>

      <button
        class="flex items-center gap-3 font-bold py-3 px-3 rounded-full bg-lightAccent text-darkSecondary"
        (click)="toggleForm()"
      >
        <span
          class="w-6 h-6 bg-white rounded-full flex items-center justify-center"
        >
          <img src="assets/icon-plus.svg" alt="Add Icon" class="w-2 h-2" />
        </span>
        <span class="text-sm text-center">New Invoice</span>
      </button>
    </div>
  </div>

  <ul class="space-y-4 cursor-pointer">
    <li
      *ngFor="let invoice of filteredInvoices$ | async"
      class="flex justify-between items-center p-6 rounded-md shadow-md w-full"
      [ngClass]="{
        'bg-white': !(isDarkMode$ | async),
        'bg-darkPrimary': isDarkMode$ | async
      }"
    >
      <div
        class="font-bold"
        [ngClass]="{
          'text-lightText': !(isDarkMode$ | async),
          'text-darkSecondary': isDarkMode$ | async
        }"
      >
        <span
          [ngClass]="{
            'text-lightSecondary': !(isDarkMode$ | async),
            'text-darkSecondary': isDarkMode$ | async
          }"
        >
          #
        </span>
        {{ invoice.id }}
      </div>
      <div class="hidden md:block text-[#888EB0]">
        <span>Due</span> {{ invoice.paymentDue }}
      </div>
      <div
        class="truncate w-32"
        [ngClass]="{
          'text-lightSecondary': !(isDarkMode$ | async),
          'text-darkSecondary': isDarkMode$ | async
        }"
      >
        {{ invoice.clientName }}
      </div>
      <div class="text-right md:flex md:items-center md:space-x-4">
        <span class="text-gray-500 block md:hidden">
          Due {{ invoice.paymentDue }}
        </span>
        <span
          class="font-bold"
          [ngClass]="{
            'text-lightText': !(isDarkMode$ | async),
            'text-darkSecondary': isDarkMode$ | async
          }"
        >
          Â£{{ invoice.total }}
        </span>
      </div>
      <div
        class="flex items-center justify-center space-x-2 w-[100px] p-1 rounded-lg"
        [ngClass]="{
          'bg-[#33d6a044]': invoice.status === 'paid' && !(isDarkMode$ | async),
          'bg-[#33d6a055]': invoice.status === 'paid' && (isDarkMode$ | async),
          'bg-[#ff91003e]': invoice.status === 'pending',
          'bg-[#373b5356]': invoice.status === 'draft'
        }"
      >
        <span
          class="w-2 h-2 rounded-full"
          [ngClass]="{
            'bg-[#33D69F]': invoice.status === 'paid',
            'bg-[#FF8F00]': invoice.status === 'pending',
            'bg-[#373B53]': invoice.status === 'draft'
          }"
        ></span>
        <span
          class="font-semibold"
          [ngClass]="{
            'text-[#33D69F]': invoice.status === 'paid',
            'text-[#FF8F00]': invoice.status === 'pending',
            'text-[#373B53]': invoice.status === 'draft'
          }"
        >
          {{ invoice.status | titlecase }}
        </span>
      </div>

      <img src="assets/icon-arrow-right.svg" alt="arrow-right" />
    </li>
  </ul>
</div>

<div
  [@slideInOut]="showForm ? 'in' : 'out'"
  class="fixed top-0 left-20 p-8 bg-black bg-opacity-50 z-40 w-full ml-4"
  [style.display]="showForm ? 'block' : 'none'"
>
  <app-invoice-form (formClose)="toggleForm()"></app-invoice-form>
</div>
